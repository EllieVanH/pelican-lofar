<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE pelican>

<configuration version="1.0">
    <pipeline>
        <clients>
            <ABDataClient>
                <data type="SpectrumDataSetStokes" adapter="ABDataAdapter" />
            </ABDataClient>
        </clients>

        <buffers>
            <SpectrumDataSetStokes>
                <buffer maxSize="50000000" maxChunkSize="50000000" />
            </SpectrumDataSetStokes>
        </buffers>

        <chunkers>
            <ABChunker>
                <connection host="127.0.0.1" port="2001" />
                <data type="SpectrumDataSetStokes" chunkSize="8404992" />
            </ABChunker>
        </chunkers>

        <adapters>
            <ABDataAdapter>
                <spectrum packets="4" />
                <packet channels="1024" />
            </ABDataAdapter>
        </adapters>

        <pipelineConfig>
            <ABPipeline>
                <history value="2048" />
                <events min="5" max="1000"/>
            </ABPipeline>
        </pipelineConfig>

        <modules>
            <RFI_Clipper active="true" channelRejectionRMS="3.5" spectrumRejectionRMS="6.0">
                <zeroDMing active="true" />
                <BandPassData file="/data/Commissioning/Useful/BandPass/band220-250.bp" />
                <Band matching="true" />
                <History maximum="50000" />
            </RFI_Clipper>

            <DedispersionModule>
                <sampleNumber value="8192" />
                <frequencyChannel1 MHz="142.96875"/>
                <!--sampleTime seconds="0.00032768"/-->
                <channelBandwidth MHz="0.003051757812"/>
                <dedispersionSamples value="1500" />
                <dedispersionStepSize value="0.1" />
                <dedispersionMinimum value="0.0" />
                <numberOfBuffers value="3" />
            </DedispersionModule>

            <DedispersionAnalyser>
                <detectionThreshold in_sigma="6.0" />
            </DedispersionAnalyser>
        </modules>

        <output>
            <streamers>
                <PelicanTCPBlobServer active="false">
                     <connection port="1234" />
                </PelicanTCPBlobServer>
            </streamers>
            <dataStreams>
                <stream name="all" listeners="PelicanTCPBlobServer" />
            </dataStreams>
        </output>

    </pipeline>
</configuration>

